module.exports=[58840,a=>{"use strict";var b=a.i(43112),c=a.i(85390),d=a.i(29380),e=a.i(67198),f=a.i(21302),g=a.i(75241),h=a.i(98932),i=a.i(98942),j=a.i(31376),k=a.i(82219),l=a.i(70351);function m(){let a=(0,d.useSearchParams)(),m=(0,d.useRouter)(),n=a.get("industry")||"Industry",o=a.get("editId")?Number(a.get("editId")):null,p=a.get("category")||"",[q,r]=(0,c.useState)({}),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)({variableCategory:"",name:"",description:"",display:"Customer Frontend, Backend & Admin",price:"0",hours:"0",minutes:"0",isDefault:!1,showBasedOnFrequency:!1,showBasedOnServiceCategory:!1,excludedExtras:[],excludedServices:[],excludedProviders:[]}),C=(0,c.useMemo)(()=>`pricingParamsAll_${n}`,[n]),D=(0,c.useMemo)(()=>`pricingVariables_${n}`,[n]),E=(0,c.useMemo)(()=>`extras_${n}`,[n]),F=(0,c.useMemo)(()=>`service_categories_${n}`,[n]);return(0,c.useEffect)(()=>{try{let a=JSON.parse(localStorage.getItem(D)||"[]");Array.isArray(a)&&t(a)}catch(a){console.error("Error loading variables:",a)}try{let a=JSON.parse(localStorage.getItem(C)||"{}");a&&"object"==typeof a&&r(a)}catch(a){console.error("Error loading pricing data:",a)}try{let a=JSON.parse(localStorage.getItem(E)||"[]");Array.isArray(a)&&v(a.map(a=>({id:a.id,name:a.name})))}catch(a){console.error("Error loading extras:",a)}try{let a=JSON.parse(localStorage.getItem(F)||"[]");Array.isArray(a)&&x(a.map(a=>({id:a.id,name:a.name})))}catch(a){console.error("Error loading services:",a)}try{let a=JSON.parse(localStorage.getItem("adminProviders")||"[]");Array.isArray(a)&&z(a.map(a=>({id:a.id,name:a.name})))}catch(a){console.error("Error loading providers:",a)}},[C,D,E,F]),(0,c.useEffect)(()=>{if(o&&p&&q[p]){let a=q[p].find(a=>a.id===o);if(a){let[b,c]=a.time.split(" ").reduce((a,b)=>(b.includes("Hr")&&(a[0]=b.replace("Hr","").trim()),b.includes("Min")&&(a[1]=b.replace("Min","").trim()),a),["0","0"]);B({variableCategory:a.variableCategory,name:a.name,description:a.description||"",display:a.display,price:String(a.price??0),hours:b||"0",minutes:c||"0",isDefault:a.isDefault||!1,showBasedOnFrequency:a.showBasedOnFrequency||!1,showBasedOnServiceCategory:a.showBasedOnServiceCategory||!1,excludedExtras:a.excludedExtras||[],excludedServices:a.excludedServices||[],excludedProviders:a.excludedProviders||[]})}}},[o,p,q]),(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:o?"Edit Pricing Parameter":"Add Pricing Parameter"}),(0,b.jsxs)(e.CardDescription,{children:["Configure pricing parameter for ",n,"."]})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsxs)(l.Tabs,{defaultValue:"details",className:"w-full",children:[(0,b.jsxs)(l.TabsList,{className:"grid w-full grid-cols-3 mb-6",children:[(0,b.jsx)(l.TabsTrigger,{value:"details",children:"Details"}),(0,b.jsx)(l.TabsTrigger,{value:"dependencies",children:"Dependencies"}),(0,b.jsx)(l.TabsTrigger,{value:"providers",children:"Providers"})]}),(0,b.jsxs)(l.TabsContent,{value:"details",className:"mt-4 space-y-5",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"variable-category",children:"Variable Category"}),0===s.length?(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No variables available. Please add variables first."}):(0,b.jsxs)("select",{id:"variable-category",value:A.variableCategory,onChange:a=>B(b=>({...b,variableCategory:a.target.value})),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",disabled:!!o,children:[(0,b.jsx)("option",{value:"",children:"Select a variable category"}),s.map(a=>(0,b.jsx)("option",{value:a.category,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"name",children:"Name"}),(0,b.jsx)(g.Input,{id:"name",value:A.name,onChange:a=>B(b=>({...b,name:a.target.value})),placeholder:"e.g., 1 - 1249 Sq Ft"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"description",children:"Description"}),(0,b.jsx)(i.Textarea,{id:"description",rows:3,value:A.description,onChange:a=>B(b=>({...b,description:a.target.value})),placeholder:"Add Description"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"Display"}),(0,b.jsxs)(k.RadioGroup,{value:A.display,onValueChange:a=>B(b=>({...b,display:a})),className:"grid gap-2",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(k.RadioGroupItem,{value:"Customer Frontend, Backend & Admin"})," Customer Frontend, Backend & Admin"]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(k.RadioGroupItem,{value:"Customer Backend & Admin"})," Customer Backend & Admin"]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(k.RadioGroupItem,{value:"Admin Only"})," Admin Only"]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"price",children:"Price ($)"}),(0,b.jsx)(g.Input,{id:"price",type:"number",step:"0.01",value:A.price,onChange:a=>B(b=>({...b,price:a.target.value})),placeholder:"0.00"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"Time"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"hours",className:"text-xs text-muted-foreground",children:"Hours"}),(0,b.jsx)(g.Input,{id:"hours",type:"number",min:0,value:A.hours,onChange:a=>B(b=>({...b,hours:a.target.value})),placeholder:"0"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"minutes",className:"text-xs text-muted-foreground",children:"Minutes"}),(0,b.jsx)(g.Input,{id:"minutes",type:"number",min:0,max:59,value:A.minutes,onChange:a=>B(b=>({...b,minutes:a.target.value})),placeholder:"0"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Checkbox,{id:"default-tier",checked:A.isDefault,onCheckedChange:a=>B(b=>({...b,isDefault:!!a}))}),(0,b.jsx)(h.Label,{htmlFor:"default-tier",className:"text-sm",children:"Set as Default"})]})]}),(0,b.jsx)(l.TabsContent,{value:"dependencies",className:"mt-4 space-y-6",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(h.Label,{className:"text-base font-semibold",children:"Should the variables show based on the frequency?"}),(0,b.jsxs)(k.RadioGroup,{value:A.showBasedOnFrequency?"yes":"no",onValueChange:a=>B(b=>({...b,showBasedOnFrequency:"yes"===a})),className:"grid gap-2 pl-4",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(k.RadioGroupItem,{value:"yes"})," Yes"]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(k.RadioGroupItem,{value:"no"})," No"]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(h.Label,{className:"text-base font-semibold",children:"Should the variables show based on the service category?"}),(0,b.jsxs)(k.RadioGroup,{value:A.showBasedOnServiceCategory?"yes":"no",onValueChange:a=>B(b=>({...b,showBasedOnServiceCategory:"yes"===a})),className:"grid gap-2 pl-4",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(k.RadioGroupItem,{value:"yes"})," Yes"]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(k.RadioGroupItem,{value:"no"})," No"]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(h.Label,{className:"text-base font-semibold",children:"Exclude Parameters"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{className:"text-sm font-medium",children:"Extras"}),0===u.length?(0,b.jsx)("p",{className:"text-sm text-muted-foreground pl-4",children:"No extras available"}):(0,b.jsxs)("div",{className:"border rounded-md p-4 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2 pb-2 border-b",children:[(0,b.jsx)(j.Checkbox,{id:"select-all-extras",checked:A.excludedExtras.length===u.length,onCheckedChange:a=>{a?B(a=>({...a,excludedExtras:u.map(a=>a.id)})):B(a=>({...a,excludedExtras:[]}))}}),(0,b.jsx)("label",{htmlFor:"select-all-extras",className:"text-sm font-medium cursor-pointer",children:"Select All"})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto",children:u.map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(j.Checkbox,{id:`extra-${a.id}`,checked:A.excludedExtras.includes(a.id),onCheckedChange:b=>{b?B(b=>({...b,excludedExtras:[...b.excludedExtras,a.id]})):B(b=>({...b,excludedExtras:b.excludedExtras.filter(b=>b!==a.id)}))}}),(0,b.jsx)("label",{htmlFor:`extra-${a.id}`,className:"text-sm cursor-pointer",children:a.name})]},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{className:"text-sm font-medium",children:"Service Checklist"}),0===w.length?(0,b.jsx)("p",{className:"text-sm text-muted-foreground pl-4",children:"No services available"}):(0,b.jsxs)("div",{className:"border rounded-md p-4 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2 pb-2 border-b",children:[(0,b.jsx)(j.Checkbox,{id:"select-all-services",checked:A.excludedServices.length===w.length,onCheckedChange:a=>{a?B(a=>({...a,excludedServices:w.map(a=>a.id)})):B(a=>({...a,excludedServices:[]}))}}),(0,b.jsx)("label",{htmlFor:"select-all-services",className:"text-sm font-medium cursor-pointer",children:"Select All"})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto",children:w.map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(j.Checkbox,{id:`service-${a.id}`,checked:A.excludedServices.includes(a.id),onCheckedChange:b=>{b?B(b=>({...b,excludedServices:[...b.excludedServices,a.id]})):B(b=>({...b,excludedServices:b.excludedServices.filter(b=>b!==a.id)}))}}),(0,b.jsx)("label",{htmlFor:`service-${a.id}`,className:"text-sm cursor-pointer",children:a.name})]},a.id))})]})]})]})]})}),(0,b.jsx)(l.TabsContent,{value:"providers",className:"mt-4 space-y-6",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Check the providers you want to exclude from this pricing parameter."}),0===y.length?(0,b.jsx)("p",{className:"text-sm text-muted-foreground italic",children:"No providers added yet. Add providers from the Providers section in the admin dashboard."}):(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(h.Label,{children:"Providers"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Checkbox,{id:"select-all-providers",checked:A.excludedProviders.length===y.length&&y.length>0,onCheckedChange:a=>{a?B(a=>({...a,excludedProviders:y.map(a=>a.id)})):B(a=>({...a,excludedProviders:[]}))}}),(0,b.jsx)(h.Label,{htmlFor:"select-all-providers",className:"text-sm font-medium cursor-pointer",children:"Select All"})]}),y.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Checkbox,{id:`provider-${a.id}`,checked:A.excludedProviders.includes(a.id),onCheckedChange:b=>{b?B(b=>({...b,excludedProviders:[...b.excludedProviders,a.id]})):B(b=>({...b,excludedProviders:b.excludedProviders.filter(b=>b!==a.id)}))}}),(0,b.jsx)(h.Label,{htmlFor:`provider-${a.id}`,className:"text-sm font-normal cursor-pointer",children:a.name})]},a.id))]})]})]})})]}),(0,b.jsxs)("div",{className:"mt-6 flex gap-2 justify-end",children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>m.push(`/admin/settings/industries/form-1/pricing-parameter?industry=${encodeURIComponent(n)}`),children:"Cancel"}),(0,b.jsx)(f.Button,{onClick:()=>{if(!A.variableCategory||!A.name.trim())return;let a=Number(A.price)||0,b=Number(A.hours)||0,c=Number(A.minutes)||0,d=`${b>0?`${b} Hr`:""}${c>0?` ${c} Min`:""}`.trim()||"0";if(o&&p){let b=q[p].map(b=>b.id===o?{...b,name:A.name.trim(),price:a,time:d,display:A.display,description:A.description,isDefault:A.isDefault,frequency:A.isDefault?"Default":"",showBasedOnFrequency:A.showBasedOnFrequency,showBasedOnServiceCategory:A.showBasedOnServiceCategory,excludedExtras:A.excludedExtras,excludedServices:A.excludedServices,excludedProviders:A.excludedProviders}:b),c={...q,[p]:b};localStorage.setItem(C,JSON.stringify(c))}else{let b=q[A.variableCategory]||[],c={id:b.reduce((a,b)=>b.id>a?b.id:a,0)+1,name:A.name.trim(),price:a,time:d,display:A.display,serviceCategory:"",frequency:A.isDefault?"Default":"",variableCategory:A.variableCategory,description:A.description,isDefault:A.isDefault,showBasedOnFrequency:A.showBasedOnFrequency,showBasedOnServiceCategory:A.showBasedOnServiceCategory,excludedExtras:A.excludedExtras,excludedServices:A.excludedServices,excludedProviders:A.excludedProviders},e={...q,[A.variableCategory]:[...b,c]};localStorage.setItem(C,JSON.stringify(e))}m.push(`/admin/settings/industries/form-1/pricing-parameter?industry=${encodeURIComponent(n)}`)},disabled:!A.variableCategory||!A.name.trim(),className:"text-white",style:{background:"linear-gradient(135deg, #00BCD4 0%, #00D4E8 100%)"},children:o?"Save":"Create"})]})]})]})})}a.s(["default",()=>m])}];

//# sourceMappingURL=7b9fb_app_admin_settings_industries_form-1_pricing-parameter_new_page_tsx_967cb471._.js.map